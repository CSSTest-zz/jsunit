<project name="JsUnit" default="jsunit_tests" basedir=".">

    <property name="src" location="java/src"/>
    <property name="bin" location="java/bin"/>
    <property name="lib" location="java/lib"/>
    <property name="debug" value="yes"/>

    <target name="compile" description="Compile the source">
        <delete dir="${bin}/net"/>
        <javac srcdir="${src}" destdir="${bin}" debug="${debug}" target="1.1">
            <classpath>
                <fileset dir="${lib}">
                    <include name="*.jar"/>
                </fileset>
            </classpath>
        </javac>
    </target>

    <target name="create_jar" depends="compile" description="Generate jsunit.jar">
        <delete file="${bin}/jsunit.jar"/>
        <jar jarfile="${bin}/jsunit.jar" basedir="${bin}"/>
        <delete dir="${bin}/net"/>
    </target>

    <target name="jsunit_tests" depends="create_jar" description="Runs the JUnit tests for JsUnit">
        <java classname="junit.textui.TestRunner">
            <classpath>
                <fileset dir="${lib}">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="${bin}">
                    <include name="jsunit.jar"/>
                </fileset>
            </classpath>
            <arg value="net.jsunit.test.Suite"/>
        </java>
    </target>

    <target name="start_server" description="Starts the JsUnit Server">
        <java classname="net.jsunit.JsUnitServer" fork="true">
            <classpath>
                <fileset dir="${lib}">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="${bin}">
                    <include name="jsunit.jar"/>
                </fileset>
            </classpath>
        </java>
    </target>
    
    <target name="standalone_test" description="Runs JsUnit tests">
        <junit>
            <test name="net.jsunit.StandaloneTest"/>
        </junit>
    </target>

    <target name="distributed_test" description="Runs JsUnit tests">
        <junit>
            <test name="net.jsunit.DistributedTest"/>
        </junit>
    </target>

</project>