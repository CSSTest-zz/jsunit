<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN"
            "http://www.w3.org/TR/html4/frameset.dtd">
<html>
<!-- JsUnit -->
<!-- ***** BEGIN LICENSE BLOCK *****
   - Version: MPL 1.1/GPL 2.0/LGPL 2.1
   -
   - The contents of this file are subject to the Mozilla Public License Version
   - 1.1 (the "License"); you may not use this file except in compliance with
   - the License. You may obtain a copy of the License at
   - http://www.mozilla.org/MPL/
   -
   - Software distributed under the License is distributed on an "AS IS" basis,
   - WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
   - for the specific language governing rights and limitations under the
   - License.
   -
   - The Original Code is Edward Hieatt code.
   -
   - The Initial Developer of the Original Code is
   - Edward Hieatt, edward@jsunit.net.
   - Portions created by the Initial Developer are Copyright (C) 2001
   - the Initial Developer. All Rights Reserved.
   -
   - Contributor(s):
   - Edward Hieatt, edward@jsunit.net (original author)
   - Bob Clary, bc@bclary.comn
   -
   - Alternatively, the contents of this file may be used under the terms of
   - either the GNU General Public License Version 2 or later (the "GPL"), or
   - the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
   - in which case the provisions of the GPL or the LGPL are applicable instead
   - of those above. If you wish to allow use of your version of this file only
   - under the terms of either the GPL or the LGPL, and not to allow others to
   - use your version of this file under the terms of the MPL, indicate your
   - decision by deleting the provisions above and replace them with the notice
   - and other provisions required by the LGPL or the GPL. If you do not delete
   - the provisions above, a recipient may use your version of this file under
   - the terms of any one of the MPL, the GPL or the LGPL.
   -
   - ***** END LICENSE BLOCK ***** -->

  <head>
    <title>JsUnit</title>
    <script language="JavaScript" type="text/javascript" src="app/xbDebug.js"></script>
<script type="text/javascript">

  var jsUnitParmHash = new Object();

  jsUnitParseParms(document.location.search);

  // set to true to turn debugging code on, false to turn it off.
  xbDEBUG.on = (jsUnitParmHash.debug) ? true : false;

  function jsUnitParseParms(string)
  {
    var i;
    var searchString = unescape(string);
    if (!searchString)
    {
      return;
    }

    i = searchString.indexOf('?');
    if (i != -1)
    {
      searchString = searchString.substring(i+1);
    }

    var parmList     = searchString.split('&');
    var a;
    for (i = 0; i < parmList.length; i++)
    {
      a = parmList[i].split('=');
      a[0] = a[0].toLowerCase();
      if (a.length > 1)
      {
        jsUnitParmHash[a[0]] =  a[1];
      }
      else
      {
        jsUnitParmHash[a[0]] =  true;
      }
    }
  }

  function jsUnitConstructTestParms()
  {
     var p;
     var parms = '';

     for (p in jsUnitParmHash)
     {
       if (p != 'testpage' && p!='autorun' && p!='submitresults')
       {
         if (parms)
         {
           parms += '&';
         }

         parms += p;

         if (typeof(jsUnitParmHash[p]) != 'boolean')
         {
           parms += '=' + jsUnitParmHash[p];
         }
       }
     }
     return escape(parms);
  }

</script>

<script language="JavaScript" type="text/javascript" src="app/jsUnitTestManager.js"></script>
<script language="JavaScript" type="text/javascript" src="app/jsUnitTracer.js"></script>
<script language="JavaScript" type="text/javascript" src="app/jsUnitTestSuite.js"></script>
<script type="text/javascript">

  var testManager;
  var utility;
  var tracer;


  var JSUNIT_UNDEFINED_VALUE;

  if (!Array.prototype.push)
  {
    Array.prototype.push = function (anObject)
    {
      this[this.length] = anObject;
    }
  }

  if (!Array.prototype.pop)
  {
    Array.prototype.pop = function ()
    {
      if (this.length > 0)
      {
        delete this[this.length - 1];
        this.length--;
      }
    }
  }
  
  function shouldKickOffTestsAutomatically() {
  	return jsUnitParmHash.autorun=="true";
  }
  
  function shouldSubmitResults() {
  	return jsUnitParmHash.submitresults=="true";
  }
  
  function submitResults() {
    window.mainFrame.mainData.testRunnerForm.runButton.disabled=true;
  	window.mainFrame.mainErrors.submitResults();
  }
  
  function init()
  {
    testManager = new jsUnitTestManager();
    tracer      = new jsUnitTracer();    
    if (shouldKickOffTestsAutomatically()) {
    	window.mainFrame.mainData.kickOffTests();
    }
  }

</script>
  </head>

  <frameset rows="0,0,*" frameborder="0" onload="init()">
    <frame name="testContainer"  src="./app/testContainer.html">
    <frame name="documentLoader" src="./app/main-loader.html">
    <frame name="mainFrame"      src="./app/main-frame.html">

    <noframes>
      <body>
        <p>Sorry: JsUnit requires support for frames.</p>
      </body>
    </noframes>
  </frameset>
</html>
